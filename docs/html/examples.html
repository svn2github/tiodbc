<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>TinyODBC: </title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h2><a class="anchor" name="examples_demo">
Examples Demostration</a></h2>
<h3><a class="anchor" name="example_1">
Example 1: Connecting and disconnecting from a server.</a></h3>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include "./tiodbc.hpp"</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keyword">using namespace </span>std;

<span class="keywordtype">int</span> main()
{   
   <span class="comment">// Create a connection with an ODBC Data Source</span>
    <a class="code" href="classtiodbc_1_1connection.html" title="An ODBC connection representation object.">tiodbc::connection</a> my_connection(<span class="stringliteral">"MyDSN"</span>, <span class="stringliteral">""</span>, <span class="stringliteral">""</span>);

    <span class="comment">// Check if it was connected succesfully</span>
    <span class="keywordflow">if</span> (my_connection.connected())
        cout &lt;&lt; <span class="stringliteral">"Connection has been accomplished"</span>;
    <span class="keywordflow">else</span>
        cout &lt;&lt; <span class="stringliteral">"Error connecting with server"</span> &lt;&lt; endl
            &lt;&lt; my_connection.last_error();

    
    <span class="comment">// Do more things here</span>
    <span class="comment">//.....</span>

    <span class="comment">// Disconnect</span>
    my_connection.disconnect();

    <span class="keywordflow">return</span> 0;
}
</pre></div><h3><a class="anchor" name="example_2">
Example 2: Execute directly an sql query and get results.</a></h3>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include "./tiodbc.hpp"</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keyword">using namespace </span>std;

<span class="keywordtype">int</span> main()
{   
    <a class="code" href="classtiodbc_1_1connection.html" title="An ODBC connection representation object.">tiodbc::connection</a> my_connection;
    <a class="code" href="classtiodbc_1_1statement.html" title="An ODBC statement representation object.">tiodbc::statement</a> my_statement;

    <span class="comment">// Create a connection with an ODBC Data Source</span>
    <span class="keywordflow">if</span> (!my_connection.<a class="code" href="classtiodbc_1_1connection.html#4e11f36607613fef7d50507a14dcf008" title="Connect to a Data Source.">connect</a>(<span class="stringliteral">"MyDSN"</span>, <span class="stringliteral">""</span>, <span class="stringliteral">""</span>))
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot connect to the Data Source"</span> &lt;&lt; endl
            &lt;&lt; my_connection.<a class="code" href="classtiodbc_1_1connection.html#07d9e69f8b6d25af44e75f4fb6fe32d2" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 1;
    }

    <span class="comment">// Execute a direct query</span>
    <span class="keywordflow">if</span> (!my_statement.<a class="code" href="classtiodbc_1_1statement.html#1633667ca4afc17cbd5b9dfe9d9822a5" title="Execute directly an sql query to the server.">execute_direct</a>(my_connection, <span class="stringliteral">"SELECT * FROM my_table"</span>))
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot execute query!"</span> &lt;&lt; endl
            &lt;&lt; my_connection.<a class="code" href="classtiodbc_1_1connection.html#07d9e69f8b6d25af44e75f4fb6fe32d2" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 2;
    }

    <span class="comment">// Get results from statement</span>
    <span class="keywordflow">while</span>(my_statement.<a class="code" href="classtiodbc_1_1statement.html#8666cc7f161c58ddb0dbde138cd09d24" title="Fetch next result row.">fetch_next</a>())
    {
        <span class="comment">// print all fields for each row</span>
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1;i &lt;= my_statement.<a class="code" href="classtiodbc_1_1statement.html#33c9ea30bcee5efe5a1fe3a318f6ca9c" title="Count columns of the result set.">count_columns</a>(); i ++)
            cout &lt;&lt; my_statement.<a class="code" href="classtiodbc_1_1statement.html#346c38630d3fc9b2444832592ea92380" title="Get a field of the current row in the result set.">field</a>(i).as_string() &lt;&lt; <span class="stringliteral">"\t"</span>;

        cout &lt;&lt; endl;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div><h3><a class="anchor" name="example_3">
Example 3: Execute directly an "INSERT" sql query.</a></h3>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include "./tiodbc.hpp"</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keyword">using namespace </span>std;

<span class="keywordtype">int</span> main()
{   
    <a class="code" href="classtiodbc_1_1connection.html" title="An ODBC connection representation object.">tiodbc::connection</a> my_connection;
    <a class="code" href="classtiodbc_1_1statement.html" title="An ODBC statement representation object.">tiodbc::statement</a> my_statement;

    <span class="comment">// Create a connection with an ODBC Data Source</span>
    <span class="keywordflow">if</span> (!my_connection.<a class="code" href="classtiodbc_1_1connection.html#4e11f36607613fef7d50507a14dcf008" title="Connect to a Data Source.">connect</a>(<span class="stringliteral">"MyDSN"</span>, <span class="stringliteral">""</span>, <span class="stringliteral">""</span>))
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot connect to the Data Source"</span> &lt;&lt; endl
            &lt;&lt; my_connection.<a class="code" href="classtiodbc_1_1connection.html#07d9e69f8b6d25af44e75f4fb6fe32d2" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 1;
    }

    <span class="comment">// Execute a direct query</span>
    <span class="keywordflow">if</span> (!my_statement.<a class="code" href="classtiodbc_1_1statement.html#1633667ca4afc17cbd5b9dfe9d9822a5" title="Execute directly an sql query to the server.">execute_direct</a>(my_connection,
        <span class="stringliteral">"INSERT INTO books (id, title, author) VALUES(\'0\', \'TinyODBC Manual\', \'sque\')"</span>))
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot execute query!"</span> &lt;&lt; endl
            &lt;&lt; my_connection.<a class="code" href="classtiodbc_1_1connection.html#07d9e69f8b6d25af44e75f4fb6fe32d2" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 2;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div><h3><a class="anchor" name="example_4">
Example 4: Prepare a statement and execute it multiple times</a></h3>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include "./tiodbc.hpp"</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keyword">using namespace </span>std;

<span class="keywordtype">int</span> main()
{   
    <a class="code" href="classtiodbc_1_1connection.html" title="An ODBC connection representation object.">tiodbc::connection</a> my_connection;
    <a class="code" href="classtiodbc_1_1statement.html" title="An ODBC statement representation object.">tiodbc::statement</a> my_statement;

    <span class="comment">// Create a connection with an ODBC Data Source</span>
    <span class="keywordflow">if</span> (!my_connection.<a class="code" href="classtiodbc_1_1connection.html#4e11f36607613fef7d50507a14dcf008" title="Connect to a Data Source.">connect</a>(<span class="stringliteral">"MyDSN"</span>, <span class="stringliteral">""</span>, <span class="stringliteral">""</span>))
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot connect to the Data Source"</span> &lt;&lt; endl
            &lt;&lt; my_connection.<a class="code" href="classtiodbc_1_1connection.html#07d9e69f8b6d25af44e75f4fb6fe32d2" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 1;
    }

    <span class="comment">// Prepare the query</span>
    <span class="keywordflow">if</span> (!my_statement.<a class="code" href="classtiodbc_1_1statement.html#156c2dc4b2ab5db66cf4c6e473257714" title="Prepare a query.">prepare</a>(my_connection, <span class="stringliteral">"SELECT * FROM books WHERE author_id = ?"</span>))
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot prepare query!"</span> &lt;&lt; endl
            &lt;&lt; my_connection.<a class="code" href="classtiodbc_1_1connection.html#07d9e69f8b6d25af44e75f4fb6fe32d2" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 2;
    }

    <span class="comment">// Execute it with parameter (author_id) "2"</span>
    my_statement.<a class="code" href="classtiodbc_1_1statement.html#81b7f2c1f9ad1c922e57b38bbdbc8042" title="Handle a parameter.">param</a>(1).set_as_long(2);
    <span class="keywordflow">if</span> (!my_statement.<a class="code" href="classtiodbc_1_1statement.html#bab8c3c07df365827230600c7c1576db" title="Execute a prepared statement.">execute</a>())
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot execute prepared query!"</span> &lt;&lt; endl
            &lt;&lt; my_statement.<a class="code" href="classtiodbc_1_1statement.html#76e3d7ac6b66e06e81c85c544aba491b" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 2;
    }

    <span class="comment">// Get results from statement</span>
    <span class="keywordflow">while</span>(my_statement.<a class="code" href="classtiodbc_1_1statement.html#8666cc7f161c58ddb0dbde138cd09d24" title="Fetch next result row.">fetch_next</a>())
    {
        <span class="comment">// print all fields for each row</span>
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1;i &lt;= my_statement.<a class="code" href="classtiodbc_1_1statement.html#33c9ea30bcee5efe5a1fe3a318f6ca9c" title="Count columns of the result set.">count_columns</a>(); i ++)
            cout &lt;&lt; my_statement.<a class="code" href="classtiodbc_1_1statement.html#346c38630d3fc9b2444832592ea92380" title="Get a field of the current row in the result set.">field</a>(i).as_string() &lt;&lt; <span class="stringliteral">"\t"</span>;

        cout &lt;&lt; endl;
    }

    <span class="comment">// Execute again with parameter (author_id) "1"</span>
    my_statement.<a class="code" href="classtiodbc_1_1statement.html#81b7f2c1f9ad1c922e57b38bbdbc8042" title="Handle a parameter.">param</a>(1).set_as_long(1);
    <span class="keywordflow">if</span> (!my_statement.<a class="code" href="classtiodbc_1_1statement.html#bab8c3c07df365827230600c7c1576db" title="Execute a prepared statement.">execute</a>())
    {
        cout &lt;&lt; <span class="stringliteral">"Cannot execute prepared query!"</span> &lt;&lt; endl
            &lt;&lt; my_statement.<a class="code" href="classtiodbc_1_1statement.html#76e3d7ac6b66e06e81c85c544aba491b" title="Get last error description.">last_error</a>();
        <span class="keywordflow">return</span> 2;
    }

    <span class="comment">// Get results from statement</span>
    <span class="keywordflow">while</span>(my_statement.<a class="code" href="classtiodbc_1_1statement.html#8666cc7f161c58ddb0dbde138cd09d24" title="Fetch next result row.">fetch_next</a>())
    {
        <span class="comment">// print all fields for each row</span>
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1;i &lt;= my_statement.<a class="code" href="classtiodbc_1_1statement.html#33c9ea30bcee5efe5a1fe3a318f6ca9c" title="Count columns of the result set.">count_columns</a>(); i ++)
            cout &lt;&lt; my_statement.<a class="code" href="classtiodbc_1_1statement.html#346c38630d3fc9b2444832592ea92380" title="Get a field of the current row in the result set.">field</a>(i).as_string() &lt;&lt; <span class="stringliteral">"\t"</span>;

        cout &lt;&lt; endl;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jun 10 15:14:23 2008 for TinyODBC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
